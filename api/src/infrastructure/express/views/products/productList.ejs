<!DOCTYPE html>
<html lang="pt-br">
<%- include('../partials/settings/head') %>
<%- include('../partials/settings/header') %>

<body>
    <div class="container mt-4">
        <h1 class="mb-4">Lista de Produtos</h1>

        <div class="mb-3">
            <button class="btn btn-primary" onclick="window.location.href='/product/create'">Criar Novo Produto</button>
        </div>

        <% if (products.length === 0) { %>
            <div class="alert alert-info" role="alert">
                Nenhum produto encontrado.
            </div>
        <% } else { %>
            <div class="table-responsive">
                <table class="table table-striped table-hover table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Descrição</th>
                            <th>Preço</th>
                            <th>Data de Criação</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(product => { %>
                            <tr onclick="window.location='http://localhost:3000/product/edit?id=<%= product.id %>'" style="cursor: pointer;">
                                <td><%= product.id %></td>
                                <td><%= product.name %></td>
                                <td><%= product.description %></td>
                                <td>R$ <%= Number(product.price).toFixed(2) %></td>
                                <td><%= new Date(product.created_at).toLocaleString("pt-BR") %></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        <% } %>
    </div>
</body>
</html>
